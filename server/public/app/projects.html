<div class="session ng-cloak">
<div class="row">
	<div class="col-md-4"><h1>Your Dashboard</h1></div>
	<div class="col-md-4 statsleft"><button ng-click="refresh">Refresh Logs</button></div>
    <div class="col-md-4 statsright">
      <table>
      	<tr><td>Projects Complete: {{total - failed}}</td></tr>
      	<tr><td>Projects Failed: {{failed}}</td></tr>
      	<tr><td>Average Run Time: {{timeSum}}</td></tr>
      </table>
    </div>
</div>

<!-- <input name="name" filter="{ 'project': 'text' }"> -->

  <body ng-app="AccordionApp">

<div ng-controller="AccordionCtrl" class="datum">

  <accordion close-others="oneAtATime">
    <accordion-group heading="Projects">
    <table ng-table="tableParams" show-filter="true" class="table">
    <tr ng-repeat="project in projects">
        <td data-title="'Project Name'" filter="{ 'project': 'text' }" sortable="'project'">
            {{project.project}}
        </td>
        <td data-title="'Created at'" sortable="'createdAt'">
            {{project.createdAt | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}
        </td>
        <td data-title="'Completed at'" sortable="'completed'">
        	{{project.completed | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}
        </td>
        <td data-title="'Status'" sortable="'code'">
          <span ng-if="project.code === 0">Success</span>
          <span ng-if="project.code !== 0">Failed</span>
        </td>
    </tr>
</table>
      
    </accordion-group>
    <accordion-group heading="File Upload">
      <div class="row">
      	<div class="col-md-6 inputs">
      		<h3>Inputs</h3>
      		<div class="row">
      			<div flow-init="{target: '/upload'}"
      			     flow-files-submitted="$flow.upload()"
      			     flow-file-success="$file.msg = $message">

      			  <input type="file" flow-btn/>
      			  Input OR Other element as upload button
      			  <span class="btn" flow-btn>Upload File</span>

      			  <table>
      			    <tr ng-repeat="file in $flow.files">
      			        <td>{{$index+1}}</td>
      			        <td>{{file.name}}</td>
      			        <td>{{file.msg}}</td>
      			    </tr>
      			  </table>
      			</div>
      		</div>
        </div>

        <div class="col-md-6 scripts">
      	  <h3>Scripts</h3>
          <div flow-init="{target: '/upload'}"
               flow-files-submitted="$flow.upload()"
               flow-file-success="$file.msg = $message">

            <input type="file" flow-btn/>
            Input OR Other element as upload button
            <span class="btn" flow-btn>Upload File</span>

            <table>
              <tr ng-repeat="file in $flow.files">
                  <td>{{$index+1}}</td>
                  <td>{{file.name}}</td>
                  <td>{{file.msg}}</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </accordion-group>
  </accordion>



</div>
